<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>C55XX CSL EXAMPLE: DMA EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL EXAMPLE</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">DMA EXAMPLE DOCUMENTATION </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="DMA1"></a>
DMA EXAMPLE1 - POLLED MODE TEST</h2>
<h3><a class="anchor" id="DMA1x"></a>
TEST DESCRIPTION:</h3>
<p>This test verifies the operation of the CSL DMA module in polled mode. C5505/C5515 DSP is having four DMA Engines and each DMA engine is having four channels for the data transfers. Total 16 channels can be configured and used for the data transfer simultaneously. DMA can be used to transfer data with in the memory and between the memory and peripherals with out having intervention of the CPU.</p>
<p>During the test DMA functionality is verified by transferring the data between two buffers allocated in memory of C5505/C5515 DSP. Data in the source buffer 'dmaSRCBuff' is copied into the destination buffer 'dmaDESTBuff'. DMA is configured with proper source and destination address and data length using DMA_config() API. Configured values are read back using DMA_getConfig() API and are verified with the original values. DMA data transfer is triggered using DMA_start() API. DMA transfer completion is detected by polling on the DMA start bit using DMA_getStatus() API. After the transfer completion data in the source and destination buffer is compared. The same test procedure is repeated on all the 16 DMA channels.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="DMA1y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5505/C5515 EVM) </li>
<li>Open the project "CSL_DMA_PollExample.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="DMA1z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL APIs should return success </li>
<li>DMA configuration values should be read back and verified successfully </li>
<li>DMA transfer should be successful and source and destination data should match on all the 16 DMA channels</li>
</ul>
<p>=============================================================================</p>
<h2><a class="anchor" id="DMA2"></a>
DMA EXAMPLE2 - INTERRUPT MODE TEST</h2>
<h3><a class="anchor" id="DMA2x"></a>
TEST DESCRIPTION:</h3>
<p>This test verifies operation of the CSL DMA module in interrupt mode. C5505/C5515 DSP is having four DMA Engines and each DMA engine is having four channels for the data transfers. Total 16 channels can be configured and used for the data transfer simultaneously. DMA can be used to transfer data with in the memory and between the memory and peripherals with out having the intervention of CPU.</p>
<p>During the test DMA functionality is verified by transferring the data between two buffers allocated in memory of C5505/C5515 DSP. Data in the source buffer 'dmaSRCBuff' is copied into the destination buffer 'dmaDESTBuff'. DMA interrupts are configured and DMA ISR is registered using CSL INTC module. DMA ISR will be triggered by the DMA transfer completion interrupt. DMA is configured with proper source and destination address and data length using DMA_config() API. Configured values are read back using DMA_getConfig() API and are verified with the original values. DMA data transfer is triggered using DMA_start() API. After starting the DMA data transfer execution of the test will wait for the occurrence of DMA transfer interrupt. This is done by checking a global variable which will be updated by the DMA ISR. After the transfer completion data in the source and destination buffers is compared. The same test procedure is repeated on all the 16 DMA channels.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="DMA2y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target </li>
<li>Open the project "CSL_DMA_IntcExample.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="DMA2z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL APIs should return success </li>
<li>DMA configuration values should be read back and verified successfully </li>
<li>DMA transfer should be successful and source and destination data should match on all the 16 DMA channels</li>
</ul>
<p>=============================================================================</p>
<h2><a class="anchor" id="DMA3"></a>
DMA EXAMPLE3 - STOP API TEST</h2>
<h3><a class="anchor" id="DMA3x"></a>
TEST DESCRIPTION:</h3>
<p>This test verifies the functionality of DMA_stop() API of the CSL DMA module. This API is not required during normal mode operation of the DMA module. DMA transfer will be stopped automatically after transferring the configured length of data in normal mode of operation. DMA_stop() API is useful in two cases. One case is when DMA is operating in auto-reload mode and it is required to stop the DMA data transfer. Second case is DMA transfer is started in normal mode but it is required to abort the data transfer before the normal completion. This test verifies the functionality of DMA stop API by aborting the data transfer while DMA is transferring the data in normal mode of operation.</p>
<p>During the test DMA will be configured to transfer the data in the source buffer 'dmaSRCBuff' to the destination buffer 'dmaDESTBuff' using DMA_config() API. Configured values are read back using DMA_getConfig() API and are verified with the original values. DMA data transfer is triggered using DMA_start() API. DMA data transfer is aborted immediately using DMA_stop() API. After stopping the DMA data transfer data in the source and destination buffer will be compared. Data in the source and destination buffers should match till the point DMA is stopped by using the stop API and should mismatch after that point. Position of the buffer mismatch will be displayed in the CCS "stdout" window. This position will be different for each DMA channel. Same test procedure is repeated on all the 16 DMA channels.</p>
<p>DMA data length should be large enough and DMA_stop() API should be called immediately after calling the DMA_start() API for proper functionality of the test. DO NOT RUN THE TEST BY SINGLE STEPPING.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="DMA3y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5505/C5515 EVM) </li>
<li>Open the project "CSL_DMA_StopAPIExample.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="DMA3z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL APIs should return success </li>
<li>DMA configuration values should be read back and verified successfully </li>
<li>DMA transfer should be stopped successfully and source and destination data should mismatch on all the 16 DMA channels.</li>
</ul>
<p>=============================================================================</p>
<h2><a class="anchor" id="DMA4"></a>
DMA EXAMPLE4 - PING-PONG MODE TEST</h2>
<h3><a class="anchor" id="DMA4x"></a>
TEST DESCRIPTION:</h3>
<p>This test verifies operation of the CSL DMA module in ping-pong mode. Ping-Pong mode is a special mode of data transfer in which DMA generates a half way interrupt. When ping-pong mode is enabled DMA considers the source data buffer as two parts and generates an interrupt after transferring half of the data. First half of the buffer is Ping data buffer and second half of the buffer is Pong data buffer. These two buffers should be allocated in contiguous memory locations or one ping buffer of size equal to double the data transfer length should be allocated. Buffer being transferred by the DMA currently can be identified by reading 'Last Transfer Type' bit of the channel transfer control register. Ping-Pong mode can be utilized effectively in the interrupt mode of data transfer.</p>
<p>During the test DMA ping-pong functionality is verified by transferring the data between four buffers allocated in memory of C5515 DSP. There is one Ping set of data buffers and one Pong set of data buffers. DMA is configured for ping-pong mode and data transfer is started. Execution will wait for the ping and pong data transfer interrupts to occur. Successful completion of data transfer will copy Ping source buffer data into Ping destination buffer and Pong source buffer data into Pong destination buffer. Status of the Ping and Pong set transfer will be displayed in the CCS stdout window. Test is repeated for all the 16 DMA channels.</p>
<p>NOTE: DMA PING-PONG BUFFER MODE IS SUPPORTED ONLY ON CHIP 5515. THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="DMA4y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5515 EVM) </li>
<li>Open the project "CSL_DMA_PingPongExample.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="DMA4z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL APIs should return success </li>
<li>Ping source and destination data should match on all the 16 DMA channels </li>
<li>Pong source and destination data should match on all the 16 DMA channels </li>
</ul>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 23 2011 15:26:19 for C55XX CSL EXAMPLE by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
