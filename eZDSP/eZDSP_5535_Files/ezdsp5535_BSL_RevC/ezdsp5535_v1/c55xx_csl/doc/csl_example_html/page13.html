<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>C55XX CSL EXAMPLE: CSL RTC EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL EXAMPLE</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">CSL RTC EXAMPLE DOCUMENTATION </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="RTC1"></a>
RTC EXAMPLE1 - TIMER &amp; ALARM TEST</h2>
<h3><a class="anchor" id="RTC1x"></a>
TEST DESCRIPTION:</h3>
<p>This test code verifies the functionality of real time clock (RTC). RTC module will be configured and started to increment the configured time. Time is read from RTC module to verify whether the timer is running or not. Date and time read from the RTC is displayed in the CCS "stdout" window. Manual inspection is required to verify whether the timer is running or not. Time and Date will be displayed in the format HH:MM:SS:mmmm, DD-MM-YY respectively. 'm' in the time format represents millisecond component of the time. In the current test code time is set to 12:12:12:12 and date is set to 16-10-08. Test code will stop running after displaying the time for 255 iterations. RTC is configured to generate an interrupt for each second. Message with interrupt count will be displayed in the CCS "stdout" window to notify the RTC second interrupt. This test also verifies the generation of alarm interrupt. Alarm time is set to 12:12:17:512. So there will be an alarm interrupt at 5 secs after starting the timer. A message will be displayed in the CCS "stdout" window to notify the RTC alarm interrupt</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="RTC1y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5505/C5515 EVM) </li>
<li>Open the project "CSL_RTC_Example_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="RTC1z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL RTC APIs should return success </li>
<li>RTC time should be displayed in the CCS stdout window for 255 iterations. There should be an increment in the time for each value displayed. </li>
<li>An interrupt should be generated by the RTC for each second, which will be displayed on the CCS "stdout" window </li>
<li>An alarm interrupt should be generated when time reaches 12:12:17:512 which will be displayed on the CCS "stdout" window</li>
</ul>
<p>============================================================================</p>
<h2><a class="anchor" id="RTC2"></a>
RTC EXAMPLE2 - RTC COMPENSATION TEST</h2>
<h3><a class="anchor" id="RTC2x"></a>
TEST DESCRIPTION:</h3>
<p>This example code tests the RTC module operation with positive and negative compensation settings. The RTC module of C5505/C5515 DSP can compensate for oscillator drift due to temperature by adding or subtracting the value of the compensation registers (in milliseconds) to the 32KHz counter every hour. RTC module can be configured for positive or negative compensation using "rtc oscillator drift compensation register".</p>
<p>When RTC is configured for positive compensation of value 'N', N number of milliseconds are added to the millisecond component of time. This positive drift in time will occur after change in hours component.After each change in hours component, N number of milliseconds are counted and millisecond count starts again from 0.</p>
<p>NOTE: RTC Positive compensation does not work for the compensation values that are multiple of 10 on the chip C5505. RTC_setCompensation API will return error for such compensation values. This issue is not present on chip C5515.</p>
<p>When RTC is configured for negative compensation of value 'N', N number of milliseconds are removed from the millisecond component of time. This negative drift in time will happen after change in hours component. After each change in hours component count of milliseconds starts from N instead of 0.</p>
<p>This test code configures the RTC for positive compensation and then for negative compensation. Positive compensation setting is also verified with compensation value which is multiple of ten. After starting the RTC, time is read and displayed in the CCS "stdout" window at regular intervals of time. Manual inspection is required to observe the drift in RTC time after change in hours component. Time and Date will be displayed in the format HH:MM:SS:mmmm, DD-MM-YY respectively. 'm' in the time format represents millisecond component of the time.</p>
<p>For each compensation setting this test code will start at time 12:59:59:xxxx and runs till 13:00:01:xxxx. Drift in time will occur after hours component changes to 13 from 12.</p>
<div class="fragment"><pre class="fragment">

   Small test log of RTC time when configured for positive compensation of
   value 256 is given below. After a change in hours component, milliseconds
   are counted till 256 and count again starts from 0. msec count shown below
   is not exactly 256 and 0 due to delay in read operation.
   Time and Date is : 12:59:59:1020, 16-10-08
   Time and Date is : 13:00:00:0023, 16-10-08
   Time and Date is : 13:00:00:0048, 16-10-08
   Time and Date is : 13:00:00:0076, 16-10-08
   Time and Date is : 13:00:00:0102, 16-10-08
   Time and Date is : 13:00:00:0129, 16-10-08
   Time and Date is : 13:00:00:0156, 16-10-08
   Time and Date is : 13:00:00:0182, 16-10-08
   Time and Date is : 13:00:00:0209, 16-10-08
   Time and Date is : 13:00:00:0236, 16-10-08
   Time and Date is : 13:00:00:0006, 16-10-08   &lt;== Positive Drift in Time
   Time and Date is : 13:00:00:0034, 16-10-08

   Small test log of RTC time when configured for negative compensation of
   value 256 is given below. After a change in hours component, milliseconds
   are counted from 256 instead of 0. msec count shown below
   is not exactly 256 due to delay in read operation.
   Time and Date is : 12:59:59:0989, 16-10-08
   Time and Date is : 12:59:59:1017, 16-10-08
   Time and Date is : 13:00:00:0276, 16-10-08   &lt;== Negative Drift in Time
   Time and Date is : 13:00:00:0304, 16-10-08

   </pre></div><p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="RTC2y"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5505/C5515 EVM) </li>
<li>Open the project "CSL_RTC_Compensation_Example_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="RTC2z"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL RTC APIs should return success </li>
<li>A Positive drift in time(msec) should be observed after change in hours component of time during the positive compensation test </li>
<li>A Negative drift in time(msec) should be observed after change in hours component of time during the negative compensation test </li>
<li>RTC_setCompensation API should return failure when tested with a positive compensation value which is multiple of ten on chip C5505. It should run successfully on chip C5515. </li>
</ul>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 23 2011 15:26:20 for C55XX CSL EXAMPLE by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
