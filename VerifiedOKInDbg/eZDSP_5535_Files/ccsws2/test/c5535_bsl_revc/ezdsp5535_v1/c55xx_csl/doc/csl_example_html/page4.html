<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>C55XX CSL EXAMPLE: GPT EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL EXAMPLE</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">GPT EXAMPLE DOCUMENTATION </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="GPT"></a>
GPT EXAMPLE</h2>
<h3><a class="anchor" id="GPTx"></a>
TEST DESCRIPTION:</h3>
<p>This test code verifies the functionality of the CSL GPT (General Purpose Timer) module. GPT module of C5505/C5515 DSP is used to provide interrupts to the CPU to schedule periodic tasks or a delayed task. GPT can be configured with a counter and pre-scaler divider value. When the GPT is started counter will be decremented to 0. The rate at which this count happens can be controlled by the prescaler divider value. GPT clock is derived by dividing the CPU clock with the pre-scaler divider value.</p>
<p>This test is having two parts. First part of the test verifies whether the GTP is decrementing the counter or not. GPT is configured with a count value 0xFFFF and pre-scaler divider value 256. GPT is started and counter value is read. After few cycles of delay GPT counter value is read again. Both the counter values are compared to verify whether the second count value is less than the first counter value or not.</p>
<p>During second part of the test timer count rate of the GPT is verified. As the GPT clock is derived from the CPU clock based on the pre-scaler value it possible to verify the GPT rate with respect to CPU clock rate. GPT pre-scaler value is set to divide by 4. So the counter runs at a speed that is 1/4th of the CPU clock. Clock at which the CPU is running during the test is calculated using the function getSysClk(). This function returns the value of system clock in KHz. Value of the system clock in KHz represents the CPU clock cycles for one millisecond. GPT count value is set to 1/4th of the CPU clock cycles for one millisecond. With this setup GPT should take one millisecond to count down the counter value to 0. In other way clock cycles executed by the CPU from the time GPT is started to the time counter value reaches 0 should be equal to the number of cycles that are executed by the CPU in one millisecond.GPT is configured to generate interrupt when the count value reaches to 0. GPT is started and the CPU clock cycles are counted in while loop. This loop increments a global variable 'cpuCycleCount' until the GPT generate time-out interrupt. This while loop execution is taking 12 CPU cycles. So the total CPU cycles executed will be 12*cpuCycleCount. At the end of the test this CPU cycles calculated are compared with the CPU clock cycles that will be executed in one millisecond. The calculated CPU cycles can vary ±1% from the actual CPU cycles. If this condition is satisfied GPT is running at the configured rate.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5505 AND C5515. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h3><a class="anchor" id="GPTy"></a>
TEST PROCEDURE:</h3>
<ul>
<li>Open the CCS and connect the target (C5505/C5515 EVM) </li>
<li>Open the project "CSL_GPTExampale_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h3><a class="anchor" id="GPTz"></a>
TEST RESULT:</h3>
<ul>
<li>All the CSL APIs should return success </li>
<li>Timer count value comparison should be successful in the first part of the test </li>
<li>Timer should run at the configured rate in the second part of the test </li>
</ul>
</div></div>
<hr class="footer"/><address class="footer"><small>Generated on Thu Jun 23 2011 15:26:19 for C55XX CSL EXAMPLE by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
